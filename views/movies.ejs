<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Movie Search</title>
  <link rel="stylesheet" href="/public/style.css" />
</head>
<body>
  <header>
    <h1>ðŸŽ¬ Movie Explorer</h1>
  </header>

  <main>
    <h2>Search Movies</h2>
    <form action="/movies" method="GET">
      <input name="q" placeholder="Enter movie name" value="<%= typeof searchTerm !== 'undefined' ? searchTerm : '' %>" required />
      <button type="submit">Search</button>
    </form>

    <div id="results">

      <% if (typeof error !== 'undefined' && error) { %>
        <p><%= error %></p>
      <% } %>

      <% if ((typeof movies !== 'undefined' && movies.length === 0) && (typeof searchTerm !== 'undefined' && searchTerm)) { %>

        <p>No results found for "<%= searchTerm %>"</p>
      <% } %>

      <% if (typeof movies !== 'undefined' && movies.length > 0) { %>
        <% movies.forEach(function(movie) { %>
          <div class="movie-card">
            <h3><%= movie.title %> (<%= movie.release_date ? movie.release_date.split('-')[0] : 'N/A' %>)</h3>
            <% if (movie.poster_path) { %>
              <img src="https://image.tmdb.org/t/p/w200<%= movie.poster_path %>" alt="<%= movie.title %> poster" />
            <% } else { %>
              <p>No poster available</p>
            <% } %>
            <p><%= movie.overview || 'No description available.' %></p>
          </div>
        <% }); %>
      <% } %>

    </div>
  </main>
</body>
</html>
